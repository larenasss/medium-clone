(function(){"use strict";var t={142:function(t,e,r){var a=r(9242),s=r(3396);function o(t,e,r,a,o,i){const n=(0,s.up)("app-top-bar"),l=(0,s.up)("router-view");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(n),(0,s.Wm)(l)],64)}var i=r(7139);const n={class:"navbar navbar-light"},l={class:"container"},u=(0,s.Uk)(" MediumClone "),c={class:"nav navbar-nav pull-xs-right"},d={class:"nav-item"},p=(0,s.Uk)(" Home "),m={class:"nav-item"},g=(0,s._)("i",{class:"ion-compose"},null,-1),v=(0,s.Uk)(" New Article "),f={class:"nav-item"},h=(0,s._)("i",{class:"ion-gear-a"},null,-1),w=(0,s.Uk)(" Settings "),b={class:"nav-item"},y=["src"],_={class:"nav-item"},A=(0,s.Uk)(" Sing in "),F={class:"nav-item"},k=(0,s.Uk)(" Sing up ");function S(t,e,r,a,o,S){const U=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("nav",n,[(0,s._)("div",l,[(0,s.Wm)(U,{class:"navbar-brand",to:{name:"globalFeed"}},{default:(0,s.w5)((()=>[u])),_:1}),(0,s._)("ul",c,[(0,s._)("li",d,[(0,s.Wm)(U,{class:"nav-link",to:{name:"globalFeed"},"active-class":"active"},{default:(0,s.w5)((()=>[p])),_:1})]),t.isLoggedIn?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s._)("li",m,[(0,s.Wm)(U,{class:"nav-link",to:{name:"createArticle"},"active-class":"active"},{default:(0,s.w5)((()=>[g,v])),_:1})]),(0,s._)("li",f,[(0,s.Wm)(U,{class:"nav-link",to:{name:"settings"},"active-class":"active"},{default:(0,s.w5)((()=>[h,w])),_:1})]),(0,s._)("li",b,[(0,s.Wm)(U,{class:"nav-link",to:{name:"userProfileMyPosts",params:{userSlug:t.currentUser.username}},"active-class":"active"},{default:(0,s.w5)((()=>[(0,s._)("img",{class:"user-pic",src:t.currentUser.image},null,8,y),(0,s.Uk)(" "+(0,i.zw)(t.currentUser.username),1)])),_:1},8,["to"])])],64)):(0,s.kq)("",!0),t.isAnonymous?((0,s.wg)(),(0,s.iD)(s.HY,{key:1},[(0,s._)("li",_,[(0,s.Wm)(U,{class:"nav-link",to:{name:"login"},"active-class":"active"},{default:(0,s.w5)((()=>[A])),_:1})]),(0,s._)("li",F,[(0,s.Wm)(U,{class:"nav-link",to:{name:"register"},"active-class":"active"},{default:(0,s.w5)((()=>[k])),_:1})])],64)):(0,s.kq)("",!0)])])])}var U=r(3766);const Z=t=>{try{return JSON.parse(localStorage.getItem(t)||"")}catch(e){return console.log("Error getting data from localstorage",e),null}},C=(t,e)=>{try{localStorage.setItem(t,JSON.stringify(e))}catch(r){console.log("Error saving data in localstorage",r)}},L=t=>{try{localStorage.removeItem(t)}catch(e){console.log("Error saving data in localstorage",e)}},P="accessToken",D=()=>Z(P),$=t=>{C(P,t)},q=()=>{L(P)};var E=r(6265),j=r.n(E);j().defaults.baseURL="https://conduit.productionready.io/api",j().interceptors.request.use((t=>{const e=D(),r=e?`Token ${e}`:"";return t.headers={Authorization:r},t}));var x=j();const I=t=>x.post("/users/login",{user:t}).then((t=>t.data.user)),W=()=>x.get("/user").then((t=>t.data.user)),T=t=>x.put("/user",{user:t}).then((t=>t.data.user));var O={login:I,getCurrentUser:W,updateCurrentUserProfile:T};const V=(0,U.Q_)("settings",{state:()=>({isSubmitting:!1,validationErrors:null})}),M=(0,U.Q_)("auth",{state:()=>({isSubmitting:!1,isLoading:!1,currentUser:null,validationErrors:null,isLoggedIn:null}),getters:{isAnonymous:t=>null===t.isLoggedIn},actions:{async login(t){try{this.$patch({validationErrors:null,isSubmitting:!0});const e=await O.login(t);$(e.token),this.updateCurrentUser(e)}catch(e){throw this.$patch({isSubmitting:!1,validationErrors:e.response.data.errors}),e}},async logout(){try{q(),this.$reset()}catch(t){throw console.log(t),t}},async getCurrentUser(){try{this.$patch({isLoading:!0});const t=await O.getCurrentUser();this.updateCurrentUser(t)}catch(t){throw this.$reset(),t}},async updateCurrentUserProfile(t){const e=V();try{e.$patch({isSubmitting:!0,validationErrors:null});const r=await O.updateCurrentUserProfile(t);this.updateCurrentUser(r),e.$patch({isSubmitting:!1})}catch(r){throw e.$patch({isSubmitting:!1,validationErrors:r.response.data.errors}),this.$patch({isSubmitting:!1,validationErrors:r.response.data.errors}),r}},updateCurrentUser(t){this.$patch({currentUser:t,isLoading:!1,isLoggedIn:!0})}}});var H=(0,s.aZ)({name:"AppTopBar",setup(){const t=M(),e=(0,s.Fl)((()=>t.currentUser)),r=(0,s.Fl)((()=>t.isLoggedIn)),a=(0,s.Fl)((()=>t.isAnonymous));return{currentUser:e,isAnonymous:a,isLoggedIn:r}}}),N=r(89);const z=(0,N.Z)(H,[["render",S]]);var Y=z,Q=(0,s.aZ)({name:"App",components:{AppTopBar:Y},setup(){const t=M();(0,s.bv)((()=>t.getCurrentUser()))}});const R=(0,N.Z)(Q,[["render",o]]);var B=R,K=r(678);const J={class:"home-page"},G={class:"container page"},X={class:"row"},tt={class:"col-md-9"},et={class:"col-md-3"};function rt(t,e,r,a,o,i){const n=(0,s.up)("app-banner-item"),l=(0,s.up)("app-feed-toggle"),u=(0,s.up)("router-view"),c=(0,s.up)("app-popular-tags");return(0,s.wg)(),(0,s.iD)("div",J,[(0,s.Wm)(n),(0,s._)("div",G,[(0,s._)("div",X,[(0,s._)("div",tt,[(0,s.Wm)(l,{"tag-name":t.tagName},null,8,["tag-name"]),(0,s.Wm)(u)]),(0,s._)("div",et,[(0,s.Wm)(c)])])])])}const at={key:2,class:"sidebar"},st=(0,s._)("p",null,"Popular Tags",-1),ot={class:"tag-list"};function it(t,e,r,a,o,n){const l=(0,s.up)("app-loading-item"),u=(0,s.up)("app-error-message"),c=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",null,[t.isLoading?((0,s.wg)(),(0,s.j4)(l,{key:0})):(0,s.kq)("",!0),t.error?((0,s.wg)(),(0,s.j4)(u,{key:1})):(0,s.kq)("",!0),t.tags?((0,s.wg)(),(0,s.iD)("div",at,[st,(0,s._)("div",ot,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.tags,(t=>((0,s.wg)(),(0,s.j4)(c,{key:t,to:{name:"tag",params:{slug:t}},class:"tag-default tag-pill"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(t),1)])),_:2},1032,["to"])))),128))])])):(0,s.kq)("",!0)])}const nt=t=>((0,s.dD)("data-v-314d36a7"),t=t(),(0,s.Cn)(),t),lt={class:"loader"},ut=nt((()=>(0,s._)("div",{class:"inner one"},null,-1))),ct=nt((()=>(0,s._)("div",{class:"inner two"},null,-1))),dt=nt((()=>(0,s._)("div",{class:"inner three"},null,-1))),pt=[ut,ct,dt];function mt(t,e,r,a,o,i){return(0,s.wg)(),(0,s.iD)("div",lt,pt)}var gt=(0,s.aZ)({name:"AppLoadingItem"});const vt=(0,N.Z)(gt,[["render",mt],["__scopeId","data-v-314d36a7"]]);var ft=vt;function ht(t,e,r,a,o,n){return(0,s.wg)(),(0,s.iD)("div",null,(0,i.zw)(t.message),1)}var wt=(0,s.aZ)({name:"AppErrorMessage",props:{message:{type:String,required:!1,default:"Something went wrong"}}});const bt=(0,N.Z)(wt,[["render",ht]]);var yt=bt;const _t=()=>x.get("/tags").then((t=>t.data.tags));var At={getPopularTags:_t};const Ft=(0,U.Q_)("popularTags",{state:()=>({data:null,isLoading:!1,error:null}),actions:{async getPopularTags(){try{this.$patch({isLoading:!0,data:null});const t=await At.getPopularTags();this.$patch({isLoading:!1,data:t})}catch(t){throw this.$reset(),t}}}});var kt=(0,s.aZ)({name:"AppPopularTags",components:{AppLoadingItem:ft,AppErrorMessage:yt},setup(){const t=Ft();return(0,s.bv)((()=>t.getPopularTags())),{isLoading:(0,s.Fl)((()=>t.isLoading)),tags:(0,s.Fl)((()=>t.data)),error:(0,s.Fl)((()=>t.error))}}});const St=(0,N.Z)(kt,[["render",it]]);var Ut=St;const Zt={class:"banner"},Ct=(0,s._)("div",{class:"container"},[(0,s._)("h1",null,"Medium clone"),(0,s._)("p",null,"A place to share knowledge")],-1),Lt=[Ct];function Pt(t,e,r,a,o,i){return(0,s.wg)(),(0,s.iD)("div",Zt,Lt)}var Dt=(0,s.aZ)({name:"AppBannerItem"});const $t=(0,N.Z)(Dt,[["render",Pt]]);var qt=$t;const Et={class:"feed-toggle"},jt={class:"nav nav-pills outline-active"},xt={key:0,class:"nav-item"},It=(0,s.Uk)(" Your Feed "),Wt={class:"nav-item"},Tt=(0,s.Uk)(" Global Feed "),Ot={key:1,class:"nav-item"},Vt=(0,s._)("i",{class:"ion-pound"},null,-1);function Mt(t,e,r,a,o,n){const l=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",Et,[(0,s._)("ul",jt,[t.isLoggedIn?((0,s.wg)(),(0,s.iD)("li",xt,[(0,s.Wm)(l,{to:{name:"yourFeed"},class:(0,i.C_)(["nav-link",{active:"yourFeed"===t.routeName}])},{default:(0,s.w5)((()=>[It])),_:1},8,["class"])])):(0,s.kq)("",!0),(0,s._)("li",Wt,[(0,s.Wm)(l,{to:{name:"globalFeed"},class:(0,i.C_)(["nav-link",{active:"globalFeed"===t.routeName}])},{default:(0,s.w5)((()=>[Tt])),_:1},8,["class"])]),t.tagName?((0,s.wg)(),(0,s.iD)("li",Ot,[(0,s.Wm)(l,{to:{name:"tag"},class:(0,i.C_)(["nav-link",{active:"tag"===t.routeName}])},{default:(0,s.w5)((()=>[Vt,(0,s.Uk)(" "+(0,i.zw)(t.tagName),1)])),_:1},8,["class"])])):(0,s.kq)("",!0)])])}var Ht=(0,s.aZ)({name:"AppFeedToggle",props:{tagName:{type:String,required:!1}},setup(){const t=M(),e=(0,K.yj)(),r=(0,s.Fl)((()=>t.isLoggedIn)),a=(0,s.Fl)((()=>e.name));return{isLoggedIn:r,routeName:a}}});const Nt=(0,N.Z)(Ht,[["render",Mt]]);var zt=Nt,Yt=(0,s.aZ)({name:"AppFeedPage",components:{AppPopularTags:Ut,AppBannerItem:qt,AppFeedToggle:zt},setup(){const t=(0,K.yj)(),e=(0,s.Fl)((()=>t.params.slug));return{tagName:e}}});const Qt=(0,N.Z)(Yt,[["render",rt]]);var Rt=Qt;function Bt(t,e,r,a,o,i){const n=(0,s.up)("app-feed-item");return(0,s.wg)(),(0,s.j4)(n,{"api-url":t.apiUrl},null,8,["api-url"])}const Kt=t=>((0,s.dD)("data-v-459d38f0"),t=t(),(0,s.Cn)(),t),Jt={key:2},Gt={class:"article-meta"},Xt={class:"pull-xs-right"},te=Kt((()=>(0,s._)("span",null,"Read more...",-1)));function ee(t,e,r,a,o,n){const l=(0,s.up)("app-loading-item"),u=(0,s.up)("app-error-message"),c=(0,s.up)("app-user-info"),d=(0,s.up)("app-add-to-favorites"),p=(0,s.up)("app-tags-list"),m=(0,s.up)("router-link"),g=(0,s.up)("app-pagination");return(0,s.wg)(),(0,s.iD)(s.HY,null,[t.isLoading?((0,s.wg)(),(0,s.j4)(l,{key:0})):(0,s.kq)("",!0),t.error?((0,s.wg)(),(0,s.j4)(u,{key:1})):(0,s.kq)("",!0),t.feed?((0,s.wg)(),(0,s.iD)("div",Jt,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.feed.articles,((e,r)=>((0,s.wg)(),(0,s.iD)("div",{class:"article-preview",key:r},[(0,s._)("div",Gt,[(0,s.Wm)(c,{user:e.author,date:t.dateString(e.createdAt)},null,8,["user","date"]),(0,s._)("div",Xt,[(0,s.Wm)(d,{"is-favorited":e.favorited,"article-slug":e.slug,"favorites-count":e.favoritesCount,onHandleLike:t.handleLike},null,8,["is-favorited","article-slug","favorites-count","onHandleLike"])])]),(0,s.Wm)(m,{to:{name:"article",params:{slug:e.slug}},class:"preview-link"},{default:(0,s.w5)((()=>[(0,s._)("h1",null,(0,i.zw)(e.title),1),(0,s._)("p",null,(0,i.zw)(e.description),1),te,(0,s.Wm)(p,{tags:e.tagList},null,8,["tags"])])),_:2},1032,["to"])])))),128)),(0,s.Wm)(g,{total:t.feed.articlesCount,limit:t.limit,"current-page":t.currentPage,url:t.baseUrl},null,8,["total","limit","current-page","url"])])):(0,s.kq)("",!0)],64)}const re=5,ae=t=>{try{return new Date(t)}catch(e){console.log("Error convert date",e)}};var se=r(4782);const oe={class:"pagination"};function ie(t,e,r,a,o,n){const l=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("ul",oe,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.pages,(e=>((0,s.wg)(),(0,s.iD)("li",{key:e,class:(0,i.C_)(["page-item",{active:t.currentPage===e}])},[(0,s.Wm)(l,{to:{path:t.url,query:{page:e}},class:"page-link"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(e),1)])),_:2},1032,["to"])],2)))),128))])}const ne=(t,e)=>[...Array(e).keys()].map((e=>e+t));var le=(0,s.aZ)({name:"AppPagination",props:{total:{type:Number,requred:!0},limit:{type:Number,requred:!0},currentPage:{type:Number,requred:!0},url:{type:String,requred:!0}},setup(t){const e=(0,s.Fl)((()=>{const e=Math.ceil((t.total??0)/(t.limit??0));return ne(1,e)}));return{pages:e}}});const ue=(0,N.Z)(le,[["render",ie]]);var ce=ue;const de={key:0,class:"tag-list"};function pe(t,e,r,a,o,n){return t.tags.length?((0,s.wg)(),(0,s.iD)("ul",de,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.tags,(t=>((0,s.wg)(),(0,s.iD)("li",{key:t,class:"tag-default tag-pill tag-outline ng-binding ng-scope"},(0,i.zw)(t),1)))),128))])):(0,s.kq)("",!0)}var me=(0,s.aZ)({name:"AppTagsList",props:{tags:{type:Array,required:!0}}});const ge=(0,N.Z)(me,[["render",pe]]);var ve=ge;const fe=(0,s._)("i",{class:"ion-heart"},null,-1);function he(t,e,r,a,o,n){return(0,s.wg)(),(0,s.iD)("button",{class:(0,i.C_)(["btn btn-sm",{"btn-primary":t.isFavoritedOptimistic,"btn-outline-primary":!t.isFavoritedOptimistic}]),onClick:e[0]||(e[0]=(...e)=>t.handleLike&&t.handleLike(...e))},[fe,(0,s.Uk)(" "+(0,i.zw)(t.favoritesCountOptimistic),1)],2)}var we=r(4870);const be=t=>x.post(`/articles/${t}/favorite`,{}).then((t=>t.data.article)),ye=t=>x["delete"](`/articles/${t}/favorite`).then((t=>t.data.article));var _e={addToFavorites:be,removeFromFavorites:ye};const Ae=(0,U.Q_)("addToFavorites",{actions:{async addToFavorites({slug:t,isFavorited:e}){try{e?await _e.removeFromFavorites(t):await _e.addToFavorites(t)}catch(r){throw console.error(r),r}}}});var Fe=(0,s.aZ)({name:"AppAddToFavorites",props:{isFavorited:{type:Boolean,requred:!0},articleSlug:{type:String,requred:!0},favoritesCount:{type:Number,requred:!0}},setup(t,{emit:e}){const r=Ae(),a=(0,we.iH)(t.isFavorited??!1),o=(0,we.iH)(t.favoritesCount??0);(0,s.YP)((()=>[t.isFavorited,t.favoritesCount]),(t=>{a.value=!t[0],o.value=t[1]}));const i=()=>{const s={slug:t.articleSlug,isFavorited:a.value,favoritesCount:a.value?o.value-1:o.value+1};r.addToFavorites(s),e("handleLike",s)};return{handleLike:i,isFavoritedOptimistic:a,favoritesCountOptimistic:o}}});const ke=(0,N.Z)(Fe,[["render",he]]);var Se=ke;const Ue={key:0,class:"user-info"},Ze=["src"],Ce={class:"info"},Le={key:0,class:"date"};function Pe(t,e,r,a,o,n){const l=(0,s.up)("router-link");return t.user?((0,s.wg)(),(0,s.iD)("div",Ue,[(0,s.Wm)(l,{class:"comment-author",to:{name:"userProfileMyPosts",params:{userSlug:t.user.username}}},{default:(0,s.w5)((()=>[(0,s._)("img",{class:"comment-author-img",src:t.user.image},null,8,Ze)])),_:1},8,["to"]),(0,s._)("div",Ce,[(0,s.Wm)(l,{class:"comment-author",to:{name:"userProfileMyPosts",params:{userSlug:t.user.username}}},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(t.user.username),1)])),_:1},8,["to"]),t.date?((0,s.wg)(),(0,s.iD)("span",Le,(0,i.zw)(t.date),1)):(0,s.kq)("",!0)])])):(0,s.kq)("",!0)}var De=(0,s.aZ)({name:"AppUserInfo",props:{user:{type:Object,requred:!0},date:{type:String,requred:!1}}});const $e=(0,N.Z)(De,[["render",Pe]]);var qe=$e;const Ee=t=>x.get(t);var je={getFeed:Ee};const xe=(0,U.Q_)("feed",{state:()=>({data:null,isLoading:!1,error:null}),actions:{async getFeed({apiUrl:t}){try{this.$patch({isLoading:!0,data:null});const{data:e}=await je.getFeed(t);this.$patch({isLoading:!1,data:e})}catch(e){throw this.$reset(),e}}}});var Ie=(0,s.aZ)({name:"AppFeedItem",components:{AppPagination:ce,AppLoadingItem:ft,AppErrorMessage:yt,AppTagsList:ve,AppAddToFavorites:Se,AppUserInfo:qe},props:{apiUrl:{type:String,requred:!0}},setup(t){const e=(0,K.yj)(),r=xe(),a=(0,s.Fl)((()=>Number(e.query.page||"1"))),o=(0,s.Fl)((()=>a.value*re-re)),i=(0,s.Fl)((()=>e.path));(0,s.bv)((()=>n())),(0,s.YP)(a,(()=>n())),(0,s.YP)((()=>t.apiUrl),(()=>n()));const n=()=>{const e=(0,se.parseUrl)(t.apiUrl??""),a=(0,se.stringify)({limit:re,offset:o.value,...e.query}),s=`${e.url}?${a}`;r.getFeed({apiUrl:s})},l=t=>"string"===typeof t?ae(t)?.toLocaleString():(new Date).toLocaleString(),u=t=>{r.$patch((e=>{if(e.data){const r=e.data.articles.find((e=>e.slug==t.slug));r.favorited=t.isFavorited,r.favoritesCount=t.favoritesCount}}))};return{isLoading:(0,s.Fl)((()=>r.isLoading)),feed:(0,s.Fl)((()=>r.data)),error:(0,s.Fl)((()=>r.error)),currentPage:a,limit:re,baseUrl:i,dateString:l,handleLike:u}}});const We=(0,N.Z)(Ie,[["render",ee],["__scopeId","data-v-459d38f0"]]);var Te=We,Oe=(0,s.aZ)({name:"AppGlobalFeed",components:{AppFeedItem:Te},setup(){return{apiUrl:(0,we.iH)("/articles")}}});const Ve=(0,N.Z)(Oe,[["render",Bt]]);var Me=Ve;const He={class:"home-page"};function Ne(t,e,r,a,o,i){const n=(0,s.up)("app-feed-item");return(0,s.wg)(),(0,s.iD)("div",He,[(0,s.Wm)(n,{"api-url":t.apiUrl},null,8,["api-url"])])}var ze=(0,s.aZ)({name:"AppYourFeed",components:{AppFeedItem:Te},setup(){return{apiUrl:(0,we.iH)("/articles/feed")}}});const Ye=(0,N.Z)(ze,[["render",Ne]]);var Qe=Ye;function Re(t,e,r,a,o,i){const n=(0,s.up)("app-feed-item");return(0,s.wg)(),(0,s.j4)(n,{"api-url":t.apiUrl},null,8,["api-url"])}var Be=(0,s.aZ)({name:"AppYourFeed",components:{AppFeedItem:Te},setup(){const t=(0,K.yj)(),e=(0,s.Fl)((()=>t.params.slug));return{tagName:e,apiUrl:(0,s.Fl)((()=>`articles?tag=${e.value}`))}}});const Ke=(0,N.Z)(Be,[["render",Re]]);var Je=Ke;const Ge={class:"auth-page"},Xe={class:"container page"},tr={class:"row"},er={class:"col-md-6 offset-md-3 col-xs-12"},rr=(0,s._)("h1",{class:"text-xs-center"},"Sign up",-1),ar={class:"text-xs-center"},sr=(0,s.Uk)(" Have an account? "),or={class:"form-group"},ir={class:"form-group"},nr={class:"form-group"},lr=["disabled"];function ur(t,e,r,o,i,n){const l=(0,s.up)("router-link"),u=(0,s.up)("app-validation-errors");return(0,s.wg)(),(0,s.iD)("div",Ge,[(0,s._)("div",Xe,[(0,s._)("div",tr,[(0,s._)("div",er,[rr,(0,s._)("p",ar,[(0,s.Wm)(l,{to:{name:"login"}},{default:(0,s.w5)((()=>[sr])),_:1})]),t.validationErrors?((0,s.wg)(),(0,s.j4)(u,{key:0,"validation-errors":t.validationErrors},null,8,["validation-errors"])):(0,s.kq)("",!0),(0,s._)("form",{onSubmit:e[3]||(e[3]=(0,a.iM)(((...e)=>t.onSubmit&&t.onSubmit(...e)),["prevent"]))},[(0,s._)("fieldset",or,[(0,s.wy)((0,s._)("input",{class:"form-control form-control-lg",type:"text",placeholder:"Username","onUpdate:modelValue":e[0]||(e[0]=e=>t.user.username=e)},null,512),[[a.nr,t.user.username]])]),(0,s._)("fieldset",ir,[(0,s.wy)((0,s._)("input",{class:"form-control form-control-lg",type:"text",placeholder:"Email","onUpdate:modelValue":e[1]||(e[1]=e=>t.user.email=e)},null,512),[[a.nr,t.user.email]])]),(0,s._)("fieldset",nr,[(0,s.wy)((0,s._)("input",{class:"form-control form-control-lg",type:"password",placeholder:"Password","onUpdate:modelValue":e[2]||(e[2]=e=>t.user.password=e)},null,512),[[a.nr,t.user.password]])]),(0,s._)("button",{disabled:t.isSubmitting,class:"btn btn-lg btn-primary pull-xs-right"}," Sign Up ",8,lr)],32)])])])])}const cr={class:"error-messages"};function dr(t,e,r,a,o,n){return(0,s.wg)(),(0,s.iD)("ul",cr,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.errorMessages,(t=>((0,s.wg)(),(0,s.iD)("li",{key:t},(0,i.zw)(t),1)))),128))])}var pr=(0,s.aZ)({name:"AppValidationErrors",props:{validationErrors:{type:Object,required:!0}},setup(t){const e=(0,s.Fl)((()=>Object.keys(t.validationErrors).map((e=>{const r=t.validationErrors[e].join(", ");return`${e} ${r}`}))));return{errorMessages:e}}});const mr=(0,N.Z)(pr,[["render",dr]]);var gr=mr;const vr=t=>x.post("/users",{user:t}).then((t=>t.data.user)),fr=t=>x.get(`/profiles/${t}`).then((t=>t.data.profile)),hr=t=>x.post(`/profiles/${t}/follow`,{}).then((t=>t.data.profile)),wr=t=>x["delete"](`/profiles/${t}/follow`).then((t=>t.data.profile));var br={register:vr,getUserProfile:fr,addToFallow:hr,removeFromFallow:wr};const yr=(0,U.Q_)("userProfile",{state:()=>({data:null,isLoading:!1,error:null}),actions:{async register(t){const e=M();try{this.$patch({validationErrors:null,isSubmitting:!0});const r=await br.register(t);C("accessToken",r.token),e.updateCurrentUser(r)}catch(r){throw e.$patch({isSubmitting:!1,validationErrors:r.response.data.errors}),r}},async getUserProfile({userSlug:t}){try{this.$patch({isLoading:!0,data:null});const e=await br.getUserProfile(t);this.$patch({isLoading:!0,data:e})}catch(e){throw this.$reset(),e}},async addToFallow({slug:t,isFallow:e}){try{const r=e?await br.removeFromFallow(t):await br.addToFallow(t);this.$patch({data:r})}catch(r){throw console.error(r),r}}}});var _r=r(2482);class Ar{constructor(t,e,r){(0,_r.Z)(this,"username",""),(0,_r.Z)(this,"bio",""),(0,_r.Z)(this,"image",""),this.username=t,this.bio=e,this.image=r}}class Fr extends Ar{constructor(t="",e,r="",a="",s="",o){super(r,a,s),(0,_r.Z)(this,"email",void 0),(0,_r.Z)(this,"password",void 0),(0,_r.Z)(this,"username",void 0),(0,_r.Z)(this,"bio",void 0),(0,_r.Z)(this,"image",void 0),(0,_r.Z)(this,"token",void 0),this.email=t,this.password=e,this.username=r,this.bio=a,this.image=s,this.token=o}}class kr extends Ar{constructor(t="",e="",r="",a=!1){super(t,e,r),(0,_r.Z)(this,"username",void 0),(0,_r.Z)(this,"bio",void 0),(0,_r.Z)(this,"image",void 0),(0,_r.Z)(this,"following",void 0),this.username=t,this.bio=e,this.image=r,this.following=a}}var Sr=r(211),Ur=function(t,e,r,a){var s,o=arguments.length,i=o<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,r):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(t,e,r,a);else for(var n=t.length-1;n>=0;n--)(s=t[n])&&(i=(o<3?s(i):o>3?s(e,r,i):s(e,r))||i);return o>3&&i&&Object.defineProperty(e,r,i),i},Zr=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};let Cr=class{constructor(t="",e=""){(0,_r.Z)(this,"email",void 0),(0,_r.Z)(this,"password",void 0),this.email=t,this.password=e}};Cr=Ur([(0,Sr.mapTo)(Fr),Zr("design:paramtypes",[String,String])],Cr);let Lr=class extends Cr{constructor(t="",e="",r=""){super(t,e),(0,_r.Z)(this,"email",void 0),(0,_r.Z)(this,"password",void 0),(0,_r.Z)(this,"username",void 0),this.email=t,this.password=e,this.username=r}};Lr=Ur([(0,Sr.mapTo)(Fr),Zr("design:paramtypes",[String,String,String])],Lr);const Pr=new Sr.Mapper;Pr.createMap(Cr);var Dr=Pr,$r=(0,s.aZ)({name:"AppRegisterPage",setup(){const t=M(),e=yr(),r=(0,K.tv)(),a=(0,we.qj)(new Lr),o=(0,s.Fl)((()=>t.isSubmitting)),i=(0,s.Fl)((()=>t.validationErrors)),n=()=>{const t=Dr.map(a);e.register(t).then((()=>r.push({name:"globalFeed"}))).catch((t=>console.log(t)))};return{onSubmit:n,isSubmitting:o,validationErrors:i,user:a}},components:{AppValidationErrors:gr}});const qr=(0,N.Z)($r,[["render",ur]]);var Er=qr;const jr={class:"auth-page"},xr={class:"container page"},Ir={class:"row"},Wr={class:"col-md-6 offset-md-3 col-xs-12"},Tr=(0,s._)("h1",{class:"text-xs-center"},"Sign in",-1),Or={class:"text-xs-center"},Vr=(0,s.Uk)(" Need an account? "),Mr={class:"form-group"},Hr={class:"form-group"},Nr=["disabled"];function zr(t,e,r,o,i,n){const l=(0,s.up)("router-link"),u=(0,s.up)("app-validation-errors");return(0,s.wg)(),(0,s.iD)("div",jr,[(0,s._)("div",xr,[(0,s._)("div",Ir,[(0,s._)("div",Wr,[Tr,(0,s._)("p",Or,[(0,s.Wm)(l,{to:{name:"register"}},{default:(0,s.w5)((()=>[Vr])),_:1})]),t.validationErrors?((0,s.wg)(),(0,s.j4)(u,{key:0,"validation-errors":t.validationErrors},null,8,["validation-errors"])):(0,s.kq)("",!0),(0,s._)("form",{onSubmit:e[2]||(e[2]=(0,a.iM)(((...e)=>t.onSubmit&&t.onSubmit(...e)),["prevent"]))},[(0,s._)("fieldset",Mr,[(0,s.wy)((0,s._)("input",{class:"form-control form-control-lg",type:"text",placeholder:"Email","onUpdate:modelValue":e[0]||(e[0]=e=>t.user.email=e)},null,512),[[a.nr,t.user.email]])]),(0,s._)("fieldset",Hr,[(0,s.wy)((0,s._)("input",{class:"form-control form-control-lg",type:"password",placeholder:"Password","onUpdate:modelValue":e[1]||(e[1]=e=>t.user.password=e)},null,512),[[a.nr,t.user.password]])]),(0,s._)("button",{disabled:t.isSubmitting,class:"btn btn-lg btn-primary pull-xs-right"}," Sign In ",8,Nr)],32)])])])])}var Yr=(0,s.aZ)({name:"AppLoginPage",setup(){const t=M(),e=(0,K.tv)(),r=(0,we.qj)(new Cr),a=(0,s.Fl)((()=>t.isSubmitting)),o=(0,s.Fl)((()=>t.validationErrors)),i=()=>{const a=Dr.map(r);t.login(a).then((()=>e.push({name:"globalFeed"}))).catch((t=>console.log(t)))};return{onSubmit:i,isSubmitting:a,validationErrors:o,user:r}},components:{AppValidationErrors:gr}});const Qr=(0,N.Z)(Yr,[["render",zr]]);var Rr=Qr;const Br={key:0,class:"article-page"},Kr={class:"banner"},Jr={class:"container"},Gr={class:"article-meta"},Xr={class:"container page"},ta={class:"row article-content"},ea={class:"col-xs-12"},ra=(0,s._)("hr",null,null,-1),aa={class:"row"},sa={class:"col-xs-12 col-md-8 offset-md-2"},oa={class:"article-actions"};function ia(t,e,r,a,o,n){const l=(0,s.up)("app-article-user-info"),u=(0,s.up)("app-loading-item"),c=(0,s.up)("app-error-message"),d=(0,s.up)("app-tags-list"),p=(0,s.up)("app-add-comment-form"),m=(0,s.up)("app-comment-list");return t.article?((0,s.wg)(),(0,s.iD)("div",Br,[(0,s._)("div",Kr,[(0,s._)("div",Jr,[(0,s._)("h1",null,(0,i.zw)(t.article.title),1),(0,s._)("div",Gr,[(0,s.Wm)(l)])])]),(0,s._)("div",Xr,[t.isLoading?((0,s.wg)(),(0,s.j4)(u,{key:0})):(0,s.kq)("",!0),t.error?((0,s.wg)(),(0,s.j4)(c,{key:1,message:t.error},null,8,["message"])):(0,s.kq)("",!0),(0,s._)("div",ta,[(0,s._)("div",ea,[(0,s._)("div",null,[(0,s._)("p",null,(0,i.zw)(t.article.body),1)]),(0,s.Wm)(d,{tags:t.article.tagList},null,8,["tags"])])]),ra,(0,s._)("div",aa,[(0,s._)("div",sa,[(0,s._)("div",oa,[(0,s.Wm)(l)]),(0,s.Wm)(p,{onAddComment:t.addComment,"is-submitting":t.isSubmittingAddComment,errors:t.validationErrors},null,8,["onAddComment","is-submitting","errors"]),(0,s.Wm)(m,{slug:t.article.slug??""},null,8,["slug"])])])])])):(0,s.kq)("",!0)}const na={key:0};function la(t,e,r,a,o,i){const n=(0,s.up)("app-comment-item");return t.comments?((0,s.wg)(),(0,s.iD)("div",na,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.comments,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e.id},[(0,s.Wm)(n,{comment:e,onDeleteComment:t.deleteComment},null,8,["comment","onDeleteComment"])])))),128))])):(0,s.kq)("",!0)}const ua=t=>((0,s.dD)("data-v-5edd36fe"),t=t(),(0,s.Cn)(),t),ca={key:0,class:"card"},da={class:"card-block"},pa={class:"card-text"},ma={class:"card-footer"},ga=ua((()=>(0,s._)("i",{class:"ion-trash-a"},null,-1))),va=[ga];function fa(t,e,r,a,o,n){const l=(0,s.up)("app-user-info");return t.comment?((0,s.wg)(),(0,s.iD)("div",ca,[(0,s._)("div",da,[(0,s._)("p",pa,(0,i.zw)(t.comment.body),1)]),(0,s._)("div",ma,[(0,s.Wm)(l,{user:t.comment.author,date:t.dateString(t.comment.createdAt)},null,8,["user","date"]),t.isCurrentUserProfile?((0,s.wg)(),(0,s.iD)("button",{key:0,class:"mod-options",onClick:e[0]||(e[0]=e=>t.deleteComment(t.comment.id))},va)):(0,s.kq)("",!0)])])):(0,s.kq)("",!0)}function ha(t){const e=M(),r=(0,s.Fl)((()=>e.currentUser)),a=(0,s.Fl)((()=>!!(t&&r.value&&t.value)&&r.value.username===t.value.username));return{currentUser:r,isCurrentUserProfile:a}}var wa=(0,s.aZ)({name:"AppCommentItem",emits:["deleteComment"],components:{AppUserInfo:qe},props:{comment:{type:Object,required:!0}},setup(t,{emit:e}){const{currentUser:r,isCurrentUserProfile:a}=ha((0,s.Fl)((()=>t.comment.author))),o=t=>{e("deleteComment",{slugComment:t})},i=t=>ae(t)?.toLocaleString();return{isCurrentUserProfile:a,currentUser:r,deleteComment:o,dateString:i}}});const ba=(0,N.Z)(wa,[["render",fa],["__scopeId","data-v-5edd36fe"]]);var ya=ba;const _a=t=>x.get(`/articles/${t}/comments`).then((t=>t.data.comments)),Aa=({slugArticle:t,comment:e})=>x.post(`/articles/${t}/comments`,{comment:e}).then((t=>t.data.comment)),Fa=({slugArticle:t,slugComment:e})=>x["delete"](`/articles/${t}/comments/${e}`);var ka={getComments:_a,deleteComment:Fa,addComment:Aa};const Sa=(0,U.Q_)("comments",{state:()=>({data:null,isLoading:!1,error:null}),actions:{async getComments({slug:t}){try{this.$patch({isLoading:!0,data:null});const e=await ka.getComments(t);this.$patch({isLoading:!0,data:e.sort(((t,e)=>new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime()))})}catch(e){throw this.$reset(),e}},async addComment(t){try{const e=await ka.addComment(t);this.$patch((t=>{t.data?.unshift(e)}))}catch(e){throw this.$patch({error:e}),e}},async deleteComment(t){try{await ka.deleteComment(t),this.$patch((e=>{null!=e.data&&(e.data=e.data.filter((e=>e.id!=t.slugComment)))}))}catch(e){throw console.error(e),e}}}});var Ua=(0,s.aZ)({name:"AppCommentList",components:{AppCommentItem:ya},props:{slug:{type:String,required:!0}},setup(t){const e=Sa();(0,s.bv)((()=>{e.getComments({slug:t.slug})}));const r=({slugComment:r})=>{const a={slugArticle:t.slug,slugComment:r};e.deleteComment(a)};return{isLoading:(0,s.Fl)((()=>e.isLoading)),comments:(0,s.Fl)((()=>e.data)),error:(0,s.Fl)((()=>e.error)),deleteComment:r}}});const Za=(0,N.Z)(Ua,[["render",la]]);var Ca=Za;const La={key:0},Pa={class:"card-block"},Da=["disabled"],$a={class:"card-footer"},qa=["src"],Ea=["disabled"];function ja(t,e,r,o,i,n){const l=(0,s.up)("app-validation-errors");return t.currentUser?((0,s.wg)(),(0,s.iD)("div",La,[t.errors?((0,s.wg)(),(0,s.j4)(l,{key:0,"validation-errors":t.errors},null,8,["validation-errors"])):(0,s.kq)("",!0),(0,s._)("form",{class:"card comment-form",onSubmit:e[1]||(e[1]=(0,a.iM)(((...e)=>t.onSubmit&&t.onSubmit(...e)),["prevent"]))},[(0,s._)("div",Pa,[(0,s.wy)((0,s._)("textarea",{class:"form-control",disabled:t.isSubmitting,"onUpdate:modelValue":e[0]||(e[0]=e=>t.commentInput.body=e)},null,8,Da),[[a.nr,t.commentInput.body]])]),(0,s._)("div",$a,[(0,s._)("img",{class:"comment-author-img",src:t.currentUser.image},null,8,qa),(0,s._)("button",{type:"submit",class:"btn btn-sm btn-primary",disabled:t.isSubmitting},"Post Comment",8,Ea)])],32)])):(0,s.kq)("",!0)}class xa{constructor(t={id:0,author:new kr,body:"",createdAt:"",updatedAt:""}){(0,_r.Z)(this,"id",void 0),(0,_r.Z)(this,"author",void 0),(0,_r.Z)(this,"body",void 0),(0,_r.Z)(this,"createdAt",void 0),(0,_r.Z)(this,"updatedAt",void 0),this.id=t.id,this.author=t.author,this.body=t.body,this.createdAt=t.createdAt,this.updatedAt=t.updatedAt}}var Ia=(0,s.aZ)({name:"AppAddCommentForm",emits:["addComment"],props:{isSubmitting:{type:Boolean,default:!1},errors:{type:Object,required:!1}},components:{AppValidationErrors:gr},setup(t,{emit:e}){const r=M(),a=(0,we.qj)(new xa);(0,s.YP)((()=>t.isSubmitting),(t=>{t||(a.body="")}));const o=()=>e("addComment",a);return{commentInput:a,onSubmit:o,currentUser:(0,s.Fl)((()=>r.currentUser))}}});const Wa=(0,N.Z)(Ia,[["render",ja]]);var Ta=Wa;const Oa={class:"article-meta d-flex"},Va={key:0},Ma=(0,s._)("i",{class:"ion-edit"},null,-1),Ha=(0,s.Uk)(" Edit Article "),Na=(0,s.Uk)("   "),za=(0,s._)("i",{class:"ion-trash-a"},null,-1),Ya=(0,s.Uk)(" Delete Article "),Qa=[za,Ya],Ra={key:1},Ba=(0,s.Uk)("   ");function Ka(t,e,r,a,o,i){const n=(0,s.up)("app-user-info"),l=(0,s.up)("router-link"),u=(0,s.up)("app-user-profile-fallow"),c=(0,s.up)("app-add-to-favorites");return(0,s.wg)(),(0,s.iD)("div",Oa,[(0,s.Wm)(n,{user:t.article.author,date:t.convertDateJsonToDate(t.article.createdAt).toLocaleString()},null,8,["user","date"]),t.article?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[t.isAuthor?((0,s.wg)(),(0,s.iD)("span",Va,[(0,s.Wm)(l,{class:"btn btn-outline-secondary btn-sm",to:{name:"editArticle",params:{slug:t.article.slug}}},{default:(0,s.w5)((()=>[Ma,Ha])),_:1},8,["to"]),Na,(0,s._)("button",{class:"btn btn-outline-danger btn-sm",onClick:e[0]||(e[0]=e=>t.deleteArticle(t.article.slug))},Qa)])):((0,s.wg)(),(0,s.iD)("span",Ra,[(0,s.Wm)(u,{userFallow:t.userProfile},null,8,["userFallow"]),Ba,(0,s.Wm)(c,{"is-favorited":t.article.favorited,"article-slug":t.article.slug,"favorites-count":t.article.favoritesCount,onHandleLike:t.handleLike},null,8,["is-favorited","article-slug","favorites-count","onHandleLike"])]))],64)):(0,s.kq)("",!0)])}const Ja=(0,s._)("i",{class:"ion-plus-round"},null,-1),Ga={key:0},Xa={key:1};function ts(t,e,r,a,o,n){return t.followingAuthor?((0,s.wg)(),(0,s.iD)("button",{key:0,type:"button",class:(0,i.C_)(["btn btn-sm action-btn",{"btn-secondary":t.followingAuthor.following,"btn-outline-secondary":!t.followingAuthor.following}]),onClick:e[0]||(e[0]=(...e)=>t.onFallow&&t.onFallow(...e))},[Ja,t.followingAuthor.following?((0,s.wg)(),(0,s.iD)("span",Ga," UnFollow "+(0,i.zw)(t.followingAuthor.username),1)):((0,s.wg)(),(0,s.iD)("span",Xa," Follow "+(0,i.zw)(t.followingAuthor.username),1))],2)):(0,s.kq)("",!0)}var es=(0,s.aZ)({props:{userFallow:{type:Object,required:!0}},setup(t){const e=yr(),r=(0,s.Fl)((()=>t.userFallow)),a=()=>{e.addToFallow({slug:t.userFallow?.username,isFallow:t.userFallow?.following})};return{onFallow:a,followingAuthor:r}}});const rs=(0,N.Z)(es,[["render",ts]]);var as=rs;const ss=t=>x.get(`/articles/${t}`).then((t=>t.data.article)),os=t=>x.post("/articles",{article:t}).then((t=>t.data.article)),is=(t,e)=>x.put(`/articles/${t}`,{article:e}).then((t=>t.data.article)),ns=t=>x["delete"](`/articles/${t}`);var ls={getArticle:ss,deleteArticle:ns,createArticle:os,updateArticle:is};const us=(0,U.Q_)("article",{state:()=>({data:null,isLoading:!1,error:null}),actions:{async getArticle({slug:t}){try{this.$patch({isLoading:!0,data:null});const e=await ls.getArticle(t);this.$patch({isLoading:!1,data:e});const r=yr();r.$patch({data:e.author})}catch(e){throw this.$reset(),e}},async deleteArticle({slug:t}){try{await ls.deleteArticle(t)}catch(e){throw console.error(e),e}}}});var cs=(0,s.aZ)({name:"AppArticleUserInfo",components:{AppUserInfo:qe,AppAddToFavorites:Se,AppUserProfileFallow:as},setup(){const t=us(),e=yr(),r=(0,K.tv)(),a=(0,s.Fl)((()=>t.data)),o=(0,s.Fl)((()=>a.value.author?.following)),{isCurrentUserProfile:i}=ha((0,s.Fl)((()=>a.value.author??null))),n=()=>{t.deleteArticle({slug:a.value.slug}).then((()=>{r.push({name:"globalFeed"})}))},l=e=>{t.$patch((t=>{t.data&&(t.data.favorited=e.isFavorited,t.data.favoritesCount=e.favoritesCount)}))};return{article:a,userProfile:(0,s.Fl)((()=>e.data)),convertDateJsonToDate:ae,isFollowing:o,isAuthor:i,deleteArticle:n,handleLike:l}}});const ds=(0,N.Z)(cs,[["render",Ka]]);var ps=ds,ms=(0,s.aZ)({name:"AppArticleItem",components:{AppLoadingItem:ft,AppErrorMessage:yt,AppTagsList:ve,AppCommentList:Ca,AppAddCommentForm:Ta,AppArticleUserInfo:ps},setup(){const t=Sa(),e=us(),r=(0,K.yj)(),a=(0,we.iH)(!1);e.getArticle({slug:r.params.slug});const s=e=>{a.value=!0,t.addComment({slugArticle:r.params.slug,comment:e}).then((()=>a.value=!1)).catch((()=>a.value=!1))};return{isLoading:(0,we.Fl)((()=>e.isLoading)),error:(0,we.Fl)((()=>e.error)),article:(0,we.Fl)((()=>e.data)),isSubmittingAddComment:a,validationErrors:(0,we.Fl)((()=>t.error)),addComment:s}}});const gs=(0,N.Z)(ms,[["render",ia]]);var vs=gs;function fs(t,e,r,a,o,i){const n=(0,s.up)("app-article-form");return(0,s.wg)(),(0,s.j4)(n,{"initial-values":t.initialValues,errors:t.validationErrors,"is-submitting":t.isSubmitting,onArticleSubmit:t.onSubmit},null,8,["initial-values","errors","is-submitting","onArticleSubmit"])}const hs={class:"editor-page"},ws={class:"container page"},bs={class:"row"},ys={class:"col-md-10 offset-md-1 col-xs-12"},_s={class:"form-group"},As=["disabled"],Fs={class:"form-group"},ks=["disabled"],Ss={class:"form-group"},Us=["disabled"],Zs={class:"form-group"},Cs=["disabled"],Ls={class:"form-group"},Ps=["disabled"];function Ds(t,e,r,o,i,n){const l=(0,s.up)("app-validation-errors");return(0,s.wg)(),(0,s.iD)("div",hs,[(0,s._)("div",ws,[(0,s._)("div",bs,[(0,s._)("div",ys,[t.errors?((0,s.wg)(),(0,s.j4)(l,{key:0,"validation-errors":t.errors},null,8,["validation-errors"])):(0,s.kq)("",!0),(0,s._)("form",{onSubmit:e[4]||(e[4]=(0,a.iM)(((...e)=>t.onSubmit&&t.onSubmit(...e)),["prevent"]))},[(0,s._)("fieldset",null,[(0,s._)("fieldset",_s,[(0,s.wy)((0,s._)("input",{type:"text",class:"form-control form-control-lg",placeholder:"Article title",disabled:t.isSubmitting,"onUpdate:modelValue":e[0]||(e[0]=e=>t.dataForm.title=e)},null,8,As),[[a.nr,t.dataForm.title]])]),(0,s._)("fieldset",Fs,[(0,s.wy)((0,s._)("input",{type:"text",class:"form-control form-control-lg",placeholder:"Description",disabled:t.isSubmitting,"onUpdate:modelValue":e[1]||(e[1]=e=>t.dataForm.description=e)},null,8,ks),[[a.nr,t.dataForm.description]])]),(0,s._)("fieldset",Ss,[(0,s.wy)((0,s._)("textarea",{class:"form-control form-control-lg",placeholder:"What is this article about?",disabled:t.isSubmitting,"onUpdate:modelValue":e[2]||(e[2]=e=>t.dataForm.body=e)},null,8,Us),[[a.nr,t.dataForm.body]])]),(0,s._)("fieldset",Zs,[(0,s.wy)((0,s._)("input",{type:"text",class:"form-control form-control-lg",placeholder:"Enter tags",disabled:t.isSubmitting,"onUpdate:modelValue":e[3]||(e[3]=e=>t.dataForm.tagList=e)},null,8,Cs),[[a.nr,t.dataForm.tagList]])]),(0,s._)("fieldset",Ls,[(0,s._)("button",{type:"submit",class:"btn btn-lg pull-xs-right btn-primary",disabled:t.isSubmitting}," Publish Article ",8,Ps)])])],32)])])])])}class $s{constructor(t={title:"",description:"",body:"",tagList:[],createdAt:"",favorited:!1,favoritesCount:0,slug:"",updatedAt:""}){(0,_r.Z)(this,"title",void 0),(0,_r.Z)(this,"description",void 0),(0,_r.Z)(this,"body",void 0),(0,_r.Z)(this,"tagList",void 0),(0,_r.Z)(this,"createdAt",void 0),(0,_r.Z)(this,"favorited",void 0),(0,_r.Z)(this,"favoritesCount",void 0),(0,_r.Z)(this,"slug",void 0),(0,_r.Z)(this,"updatedAt",void 0),(0,_r.Z)(this,"author",void 0),this.title=t.title,this.description=t.description,this.body=t.body,this.tagList=t.tagList}}var qs=(0,s.aZ)({name:"AppArticleForm",emits:["articleSubmit"],components:{AppValidationErrors:gr},props:{initialValues:{type:$s,required:!0},errors:{type:Object,required:!1},isSubmitting:{type:Boolean,required:!0}},setup(t,{emit:e}){const r=(0,we.qj)(new $s(t.initialValues)),a=()=>e("articleSubmit",r);return{dataForm:r,onSubmit:a}}});const Es=(0,N.Z)(qs,[["render",Ds]]);var js=Es;const xs=(0,U.Q_)("createArticle",{state:()=>({isSubmitting:!1,validationErrors:null}),actions:{async createArticle(t){try{this.$patch({isSubmitting:!0});const e=await ls.createArticle(t);return this.$reset(),e}catch(e){throw this.$patch({isSubmitting:!1,validationErrors:e.response.data.errors}),e}}}});var Is=(0,s.aZ)({name:"AppCreateArticle",components:{AppArticleForm:js},setup(){const t=xs(),e=(0,K.tv)(),r=new $s,a=r=>{t.createArticle(r).then((t=>{e.push({name:"article",params:{slug:t.slug}})}))};return{initialValues:r,validationErrors:(0,s.Fl)((()=>t.validationErrors)),isSubmitting:(0,s.Fl)((()=>t.isSubmitting)),onSubmit:a}}});const Ws=(0,N.Z)(Is,[["render",fs]]);var Ts=Ws;function Os(t,e,r,a,o,i){const n=(0,s.up)("app-loading-item"),l=(0,s.up)("app-article-form");return(0,s.wg)(),(0,s.iD)(s.HY,null,[t.isLoading?((0,s.wg)(),(0,s.j4)(n,{key:0})):(0,s.kq)("",!0),t.initialValues?((0,s.wg)(),(0,s.j4)(l,{key:1,"initial-values":t.initialValues,errors:t.validationErrors,"is-submitting":t.isSubmitting,onArticleSubmit:t.onSubmit},null,8,["initial-values","errors","is-submitting","onArticleSubmit"])):(0,s.kq)("",!0)],64)}const Vs=(0,U.Q_)("editArticle",{state:()=>({isSubmitting:!1,validationErrors:null,isLoading:!1,article:null}),actions:{async updateArticle({slug:t,articleInput:e}){try{this.$patch({isSubmitting:!0});const r=await ls.updateArticle(t,e);return this.$patch({isSubmitting:!1}),r}catch(r){throw this.$patch({isSubmitting:!1,validationErrors:r.response.data.errors}),r}},async getArticle({slug:t}){try{this.$patch({isLoading:!0});const e=await ls.getArticle(t);return this.$patch({isLoading:!1,article:e}),e}catch(e){throw this.$patch({isLoading:!1}),e}}}});var Ms=(0,s.aZ)({name:"AppEditArticle",components:{AppArticleForm:js,AppLoadingItem:ft},setup(){const t=Vs(),e=(0,K.tv)(),r=(0,K.yj)(),a=(0,s.Fl)((()=>t.article)),o=(0,s.Fl)((()=>a.value?new $s(a.value):null));(0,s.bv)((()=>{t.getArticle({slug:r.params.slug})}));const i=a=>{t.updateArticle({slug:r.params.slug,articleInput:a}).then((t=>{e.push({name:"article",params:{slug:t.slug}})}))};return{initialValues:o,validationErrors:(0,s.Fl)((()=>t.validationErrors)),isSubmitting:(0,s.Fl)((()=>t.isSubmitting)),isLoading:(0,s.Fl)((()=>t.isLoading)),onSubmit:i,article:a}}});const Hs=(0,N.Z)(Ms,[["render",Os]]);var Ns=Hs;const zs={key:0,class:"settings-page"},Ys={class:"container page"},Qs={class:"row"},Rs={class:"col-md-6 offset-md-3 col-xs-12"},Bs=(0,s._)("h1",{class:"text-xs-center"},"Settings",-1),Ks={class:"form-group"},Js=["disabled"],Gs={class:"form-group"},Xs=["disabled"],to={class:"form-group"},eo=["disabled"],ro={class:"form-group"},ao=["disabled"],so={class:"form-group"},oo=["disabled"],io=["disabled"],no=(0,s._)("hr",null,null,-1);function lo(t,e,r,o,i,n){const l=(0,s.up)("app-validation-errors");return t.currentUser?((0,s.wg)(),(0,s.iD)("div",zs,[(0,s._)("div",Ys,[(0,s._)("div",Qs,[(0,s._)("div",Rs,[Bs,t.validationErrors?((0,s.wg)(),(0,s.j4)(l,{key:0,"validation-errors":t.validationErrors},null,8,["validation-errors"])):(0,s.kq)("",!0),(0,s._)("form",{onSubmit:e[5]||(e[5]=(0,a.iM)(((...e)=>t.onSubmit&&t.onSubmit(...e)),["prevent"]))},[(0,s._)("fieldset",null,[(0,s._)("fieldset",Ks,[(0,s.wy)((0,s._)("input",{type:"text",class:"form-control form-control-lg","onUpdate:modelValue":e[0]||(e[0]=e=>t.form.image=e),disabled:t.isSubmitting,placeholder:"URL of profile image"},null,8,Js),[[a.nr,t.form.image]])]),(0,s._)("fieldset",Gs,[(0,s.wy)((0,s._)("input",{type:"text",class:"form-control form-control-lg","onUpdate:modelValue":e[1]||(e[1]=e=>t.form.username=e),disabled:t.isSubmitting,placeholder:"Username"},null,8,Xs),[[a.nr,t.form.username]])]),(0,s._)("fieldset",to,[(0,s.wy)((0,s._)("textarea",{class:"form-control form-control-lg","onUpdate:modelValue":e[2]||(e[2]=e=>t.form.bio=e),disabled:t.isSubmitting,placeholder:"Short bio about you"},null,8,eo),[[a.nr,t.form.bio]])]),(0,s._)("fieldset",ro,[(0,s.wy)((0,s._)("input",{type:"text",class:"form-control form-control-lg","onUpdate:modelValue":e[3]||(e[3]=e=>t.form.email=e),disabled:t.isSubmitting,placeholder:"Email"},null,8,ao),[[a.nr,t.form.email]])]),(0,s._)("fieldset",so,[(0,s.wy)((0,s._)("input",{type:"password",class:"form-control form-control-lg","onUpdate:modelValue":e[4]||(e[4]=e=>t.form.password=e),disabled:t.isSubmitting,placeholder:"New password"},null,8,oo),[[a.nr,t.form.password]])]),(0,s._)("button",{type:"submit",class:"btn btn-lg btn-primary pull-xs-right",disabled:t.isSubmitting}," Update settings ",8,io)])],32),no,(0,s._)("button",{class:"btn btn-outline-danger",onClick:e[6]||(e[6]=(...e)=>t.logout&&t.logout(...e))}," Or cick here to logout ")])])])])):(0,s.kq)("",!0)}var uo=(0,s.aZ)({name:"AppSettingsPage",components:{AppValidationErrors:gr},setup(){const t=V(),e=M(),r=(0,K.tv)(),a=(0,s.Fl)((()=>e.currentUser)),o=(0,s.Fl)((()=>a.value)),i=()=>{e.updateCurrentUserProfile(o.value).then((()=>{r.push({name:"userProfileMyPosts",params:{userSlug:a.value.username}})}))},n=()=>{e.logout().then((()=>{r.push({name:"globalFeed"})}))};return{isSubmitting:(0,s.Fl)((()=>t.isSubmitting)),validationErrors:(0,s.Fl)((()=>t.validationErrors)),currentUser:a,form:o,onSubmit:i,logout:n}}});const co=(0,N.Z)(uo,[["render",lo]]);var po=co;const mo={key:0,class:"profile-page"},go={class:"profile-page__user-info"},vo={class:"container"},fo={class:"row"},ho={class:"col-xs-12 col-md-10 offset-md-1"},wo=["src"],bo=(0,s.Uk)(" Edit Profile Settings "),yo={class:"container"},_o={class:"row"},Ao={class:"col-xs-12 col-md-10 offset-md-1"},Fo={class:"article-toggle"},ko={class:"nav nav-pills outline-active"},So={class:"nav-item"},Uo=(0,s.Uk)(" My Posts "),Zo={class:"nav-item"},Co=(0,s.Uk)(" Favorites Posts ");function Lo(t,e,r,a,o,n){const l=(0,s.up)("router-link"),u=(0,s.up)("app-user-profile-fallow"),c=(0,s.up)("router-view");return t.userProfile?((0,s.wg)(),(0,s.iD)("div",mo,[(0,s._)("div",go,[(0,s._)("div",vo,[(0,s._)("div",fo,[(0,s._)("div",ho,[(0,s._)("img",{class:"user-img",src:t.userProfile.image},null,8,wo),(0,s._)("h4",null,(0,i.zw)(t.userProfile.username),1),(0,s._)("p",null,(0,i.zw)(t.userProfile.bio),1),(0,s._)("div",null,[t.isCurrentUserProfile?((0,s.wg)(),(0,s.j4)(l,{key:0,class:"btn btn-sm btn-outline-secondary action-btn",to:{name:"settings"}},{default:(0,s.w5)((()=>[bo])),_:1})):((0,s.wg)(),(0,s.j4)(u,{key:1,userFallow:t.userProfile},null,8,["userFallow"]))])])])])]),(0,s._)("div",yo,[(0,s._)("div",_o,[(0,s._)("div",Ao,[(0,s._)("div",Fo,[(0,s._)("ul",ko,[(0,s._)("li",So,[(0,s.Wm)(l,{to:{name:"userProfileMyPosts",params:{userSlug:t.userProfile.username}},class:(0,i.C_)(["nav-link",{active:"userProfileMyPosts"===t.routeName}])},{default:(0,s.w5)((()=>[Uo])),_:1},8,["to","class"])]),(0,s._)("li",Zo,[(0,s.Wm)(l,{to:{name:"userProfileFavorites",params:{userSlug:t.userProfile.username}},class:(0,i.C_)(["nav-link",{active:"userProfileFavorites"===t.routeName}])},{default:(0,s.w5)((()=>[Co])),_:1},8,["to","class"])])])]),(0,s.Wm)(c)])])])])):(0,s.kq)("",!0)}var Po=(0,s.aZ)({name:"AppUserProfile",components:{AppUserProfileFallow:as},setup(){const t=yr(),e=(0,K.yj)(),r=(0,s.Fl)((()=>t.data)),{isCurrentUserProfile:a}=ha(r),o=(0,s.Fl)((()=>e.params.userSlug)),i=(0,s.Fl)((()=>e.name));(0,s.YP)((()=>o.value),(()=>{o.value&&n()})),(0,s.bv)((()=>n()));const n=()=>{t.getUserProfile({userSlug:o.value})};return{isLoading:(0,s.Fl)((()=>t.isLoading)),userProfile:r,error:(0,s.Fl)((()=>t.error)),isCurrentUserProfile:a,routeName:i}}});const Do=(0,N.Z)(Po,[["render",Lo]]);var $o=Do;function qo(t,e,r,a,o,i){const n=(0,s.up)("app-feed-item");return(0,s.wg)(),(0,s.j4)(n,{"api-url":t.apiUrl},null,8,["api-url"])}function Eo(){const t=(0,K.yj)(),e=(0,s.Fl)((()=>t.params.userSlug)),r=(0,s.Fl)((()=>{const r=t.path.includes("favorites");return r?`/articles?favorited=${e.value}`:`/articles?author=${e.value}`}));return{apiUrl:r}}var jo=(0,s.aZ)({name:"AppUserProfileMyPosts",components:{AppFeedItem:Te},setup(){return{...Eo()}}});const xo=(0,N.Z)(jo,[["render",qo]]);var Io=xo;function Wo(t,e,r,a,o,i){const n=(0,s.up)("app-feed-item");return(0,s.wg)(),(0,s.j4)(n,{"api-url":t.apiUrl},null,8,["api-url"])}var To=(0,s.aZ)({name:"AppUserProfileFavorites",components:{AppFeedItem:Te},setup(){return{...Eo()}}});const Oo=(0,N.Z)(To,[["render",Wo]]);var Vo=Oo;function Mo(t,e){const r=M();if(r.isLoggedIn)return e();{const r=D();if(r)return e();t.next("/")}}function Ho(t,e,r){const a=e[r];return a?()=>{const s=Ho(t,e,r+1);a(t,s)}:t.next}var No=Ho;const zo=[{path:"/register",name:"register",component:Er},{path:"/login",name:"login",component:Rr},{path:"/",name:"mainFeed",component:Rt,children:[{path:"/",name:"globalFeed",component:Me},{path:"/yourFeed",name:"yourFeed",meta:{middlewares:[Mo]},component:Qe},{path:"/tags/:slug",name:"tag",meta:{middlewares:[Mo]},component:Je}]},{path:"/articles/new",name:"createArticle",meta:{middlewares:[Mo]},component:Ts},{path:"/articles/:slug",name:"article",meta:{middlewares:[Mo]},component:vs},{path:"/articles/:slug/edit",name:"editArticle",meta:{middlewares:[Mo]},component:Ns},{path:"/settings",name:"settings",component:po,meta:{middlewares:[Mo]}},{path:"/profiles",name:"userProfile",meta:{middlewares:[Mo]},component:$o,children:[{path:"/profiles/:userSlug",name:"userProfileMyPosts",meta:{middlewares:[Mo]},component:Io},{path:"/profiles/:userSlug/favorites",name:"userProfileFavorites",meta:{middlewares:[Mo]},component:Vo}]}],Yo=(0,K.p7)({history:(0,K.PO)("/"),routes:zo});Yo.beforeEach(((t,e,r)=>{const a=t.meta.middlewares;if(!a?.length)return r();const s={to:t,from:e,next:r},o=0,i=1;a[o](s,No(s,a,i))}));var Qo=Yo;(0,a.ri)(B).use((0,U.WB)()).use(Qo).mount("#app")}},e={};function r(a){var s=e[a];if(void 0!==s)return s.exports;var o=e[a]={exports:{}};return t[a].call(o.exports,o,o.exports,r),o.exports}r.m=t,function(){var t=[];r.O=function(e,a,s,o){if(!a){var i=1/0;for(c=0;c<t.length;c++){a=t[c][0],s=t[c][1],o=t[c][2];for(var n=!0,l=0;l<a.length;l++)(!1&o||i>=o)&&Object.keys(r.O).every((function(t){return r.O[t](a[l])}))?a.splice(l--,1):(n=!1,o<i&&(i=o));if(n){t.splice(c--,1);var u=s();void 0!==u&&(e=u)}}return e}o=o||0;for(var c=t.length;c>0&&t[c-1][2]>o;c--)t[c]=t[c-1];t[c]=[a,s,o]}}(),function(){r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,{a:e}),e}}(),function(){r.d=function(t,e){for(var a in e)r.o(e,a)&&!r.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={826:0};r.O.j=function(e){return 0===t[e]};var e=function(e,a){var s,o,i=a[0],n=a[1],l=a[2],u=0;if(i.some((function(e){return 0!==t[e]}))){for(s in n)r.o(n,s)&&(r.m[s]=n[s]);if(l)var c=l(r)}for(e&&e(a);u<i.length;u++)o=i[u],r.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return r.O(c)},a=self["webpackChunkmedium_clone"]=self["webpackChunkmedium_clone"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=r.O(void 0,[998],(function(){return r(142)}));a=r.O(a)})();